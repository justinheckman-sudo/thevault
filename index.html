<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Vault</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #d1d5db; display: flex; align-items: center; justify-content: center; min-height: 100vh; }
  .slide { width: 1440px; background: #ffffff; display: flex; flex-direction: column; border: 1px solid #e5e7eb; box-shadow: 0 12px 60px rgba(0,0,0,.15); overflow: hidden; flex-shrink: 0; position: relative; }

  /* HEADER */
  .header { display: flex; align-items: center; justify-content: space-between; padding: 26px 48px 18px; border-bottom: 2px solid #f3f4f6; flex-shrink: 0; }
  .title-vault { font-size: 44px; font-weight: 800; letter-spacing: -1.5px; color: #111827; line-height: 1; }
  .title-vault span { color: #dc2626; }
  .title-sub { font-size: 13px; color: #9ca3af; letter-spacing: .07em; text-transform: uppercase; margin-top: 4px; }
  .badge { background: #fef2f2; border: 1px solid #fecaca; color: #dc2626; font-size: 11px; font-weight: 600; letter-spacing: .1em; text-transform: uppercase; padding: 6px 14px; border-radius: 4px; }

  /* PLATFORM */
  .platform-section { padding: 18px 48px 16px; border-bottom: 1px solid #f3f4f6; flex-shrink: 0; }
  .section-label { font-size: 9px; font-weight: 700; letter-spacing: .15em; text-transform: uppercase; color: #dc2626; margin-bottom: 13px; text-align: center; }
  .flow { display: flex; align-items: stretch; justify-content: center; }
  .flow-node { display: flex; flex-direction: column; align-items: center; width: 195px; }
  .flow-node-inner { display: flex; flex-direction: column; align-items: center; gap: 7px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px 14px; width: 100%; height: 100%; justify-content: center; }
  .flow-node-inner.highlight { background: #fef9f9; border-color: #fecaca; }
  .logo-box { width: 52px; height: 52px; display: flex; align-items: center; justify-content: center; }
  .logo-box svg { width: 100%; height: 100%; }
  .flow-node-name { font-size: 13px; font-weight: 700; color: #111827; text-align: center; margin-top: 3px; }
  .flow-node-desc { font-size: 10.5px; color: #6b7280; text-align: center; line-height: 1.45; }
  .flow-arrow { display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 4px; padding: 0 8px; flex-shrink: 0; }
  .arrow-line { width: 46px; height: 2px; background: #e5e7eb; position: relative; }
  .arrow-line::after { content: ''; position: absolute; right: -1px; top: -4px; border: 5px solid transparent; border-left-color: #d1d5db; }
  .arrow-label { font-size: 9px; color: #9ca3af; letter-spacing: .06em; text-transform: uppercase; }

  /* BOTTOM */
  .bottom { display: grid; grid-template-columns: 1fr 1fr 1fr; flex: 1; overflow: hidden; }
  .col { display: flex; flex-direction: column; gap: 8px; overflow: hidden; }
  .col-left  { padding: 14px 16px 14px 48px; border-right: 1px solid #f3f4f6; }
  .col-mid   { padding: 14px 16px; border-right: 1px solid #f3f4f6; }
  .col-right { padding: 14px 48px 14px 16px; }
  .sub-label { font-size: 9px; font-weight: 700; letter-spacing: .14em; text-transform: uppercase; color: #6b7280; margin-bottom: 2px; }

  /* Command cards */
  .cmd-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; flex: 1; }
  .cmd-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 7px; padding: 10px 11px; display: flex; flex-direction: column; cursor: pointer; transition: border-color .15s, box-shadow .15s, transform .1s; }
  .cmd-card:hover { border-color: #dc2626; box-shadow: 0 2px 10px rgba(220,38,38,.12); transform: translateY(-1px); }
  .cmd-card:hover .cmd-tag { background: #dc2626; color: #fff; }
  .cmd-tag { font-family: 'Consolas','Courier New',monospace; font-size: 10px; font-weight: 700; color: #dc2626; background: #fef2f2; padding: 2px 6px; border-radius: 3px; display: inline-block; margin-bottom: 4px; transition: background .15s, color .15s; }
  .cmd-name { font-size: 11px; font-weight: 700; color: #111827; margin-bottom: 2px; }
  .cmd-desc { font-size: 10px; color: #6b7280; line-height: 1.4; }
  .cmd-hint { font-size: 10px; color: #dc2626; margin-top: auto; padding-top: 5px; opacity: 0; transition: opacity .15s; }
  .cmd-card:hover .cmd-hint { opacity: 1; }

  /* Use cards */
  .use-cases { display: flex; flex-direction: column; gap: 6px; flex: 1; }
  .use-card { background: #f9fafb; border: 1px solid #e5e7eb; border-left: 3px solid #dc2626; border-radius: 0 7px 7px 0; padding: 10px 14px; display: flex; gap: 10px; align-items: flex-start; flex: 1; cursor: pointer; transition: box-shadow .15s, transform .1s; position: relative; }
  .use-card:hover { box-shadow: 0 2px 10px rgba(220,38,38,.1); transform: translateX(2px); }
  .use-title { font-size: 11px; font-weight: 700; color: #111827; white-space: nowrap; min-width: 140px; flex-shrink: 0; }
  .use-desc { font-size: 10px; color: #6b7280; line-height: 1.45; }
  .use-hint { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); font-size: 10px; color: #dc2626; opacity: 0; transition: opacity .15s; }
  .use-card:hover .use-hint { opacity: 1; }

  /* Health cards */
  .health-cards { display: flex; flex-direction: column; gap: 6px; flex: 1; }
  .health-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 7px; padding: 10px 12px; display: flex; flex-direction: column; gap: 4px; cursor: pointer; transition: border-color .15s, box-shadow .15s, transform .1s; }
  .health-card:hover { border-color: #2563eb; box-shadow: 0 2px 10px rgba(37,99,235,.1); transform: translateY(-1px); }
  .health-card.featured { border-color: #bfdbfe; background: #eff6ff; }
  .health-card.featured:hover { border-color: #2563eb; }
  .health-card-top { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
  .health-cmd { font-family: 'Consolas','Courier New',monospace; font-size: 10px; font-weight: 700; color: #2563eb; background: #dbeafe; padding: 2px 6px; border-radius: 3px; white-space: nowrap; transition: background .15s, color .15s; }
  .health-card:hover .health-cmd { background: #2563eb; color: #fff; }
  .health-card.featured .health-cmd { background: #2563eb; color: #fff; }
  .health-card.github { border-color: #d1d5db; background: #f9fafb; }
  .health-card.github:hover { border-color: #374151; box-shadow: 0 2px 10px rgba(0,0,0,.08); }
  .health-card.github .health-cmd { color: #374151; background: #e5e7eb; }
  .health-card.github:hover .health-cmd { background: #111827; color: #fff; }
  .mcp-badge { font-size: 9px; font-weight: 700; color: #059669; background: #d1fae5; border: 1px solid #6ee7b7; padding: 1px 6px; border-radius: 3px; white-space: nowrap; letter-spacing: .04em; }
  .gh-badge { font-size: 9px; font-weight: 700; color: #374151; background: #e5e7eb; border: 1px solid #d1d5db; padding: 1px 6px; border-radius: 3px; white-space: nowrap; letter-spacing: .04em; }
  .health-name { font-size: 11px; font-weight: 700; color: #111827; }
  .health-desc { font-size: 10px; color: #6b7280; line-height: 1.4; }
  .health-hint { font-size: 10px; color: #2563eb; margin-top: auto; padding-top: 4px; opacity: 0; transition: opacity .15s; }
  .health-card:hover .health-hint { opacity: 1; }

  /* MODAL */
  .modal-overlay { position: absolute; inset: 0; background: rgba(0,0,0,.45); display: flex; align-items: center; justify-content: center; z-index: 100; opacity: 0; pointer-events: none; transition: opacity .2s; }
  .modal-overlay.active { opacity: 1; pointer-events: all; }
  .modal { background: #f3f4f6; border-radius: 16px; width: 820px; max-height: 580px; display: flex; flex-direction: column; box-shadow: 0 24px 80px rgba(0,0,0,.25); transform: translateY(12px); transition: transform .2s; overflow: hidden; }
  .modal-overlay.active .modal { transform: translateY(0); }
  .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px 14px; border-bottom: 1px solid #e5e7eb; flex-shrink: 0; background: #fff; }
  .modal-title-wrap { display: flex; align-items: center; gap: 10px; }
  .modal-cmd-red { font-family: 'Consolas',monospace; font-size: 12px; font-weight: 700; color: #dc2626; background: #fef2f2; padding: 3px 9px; border-radius: 4px; }
  .modal-cmd-blue { font-family: 'Consolas',monospace; font-size: 12px; font-weight: 700; color: #2563eb; background: #dbeafe; padding: 3px 9px; border-radius: 4px; }
  .modal-cmd-dark { font-family: 'Consolas',monospace; font-size: 12px; font-weight: 700; color: #111827; background: #e5e7eb; padding: 3px 9px; border-radius: 4px; }
  .modal-title { font-size: 14px; font-weight: 700; color: #111827; }
  .modal-meta { font-size: 11px; color: #9ca3af; margin-top: 2px; }
  .modal-close { width: 28px; height: 28px; border-radius: 6px; border: 1px solid #e5e7eb; background: #f9fafb; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 15px; color: #6b7280; flex-shrink: 0; }
  .modal-close:hover { background: #fee2e2; color: #dc2626; }
  .modal-body { flex: 1; overflow-y: auto; padding: 20px; }
  .modal-body::-webkit-scrollbar { width: 5px; }
  .modal-body::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 3px; }

  /* CHAT */
  .chat-wrap { display: flex; flex-direction: column; gap: 12px; }
  .chat-row-user { display: flex; justify-content: flex-end; }
  .chat-row-ai { display: flex; justify-content: flex-start; }
  .chat-bubble-user { background: #111827; color: #f9fafb; border-radius: 18px 18px 4px 18px; padding: 12px 16px; max-width: 80%; font-size: 13px; line-height: 1.6; }
  .chat-bubble-ai { background: #fff; border: 1px solid #e5e7eb; border-radius: 4px 18px 18px 18px; padding: 14px 16px; max-width: 92%; font-size: 12px; line-height: 1.75; color: #374151; }
  .chat-bubble-ai .ai-label { font-size: 9px; font-weight: 700; letter-spacing: .12em; text-transform: uppercase; color: #dc2626; display: block; margin-bottom: 8px; }
  .chat-bubble-ai strong { color: #111827; }
  .chat-bubble-ai em { color: #6b7280; }
  .chat-context { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb; }
  .chat-context-label { font-size: 9px; font-weight: 700; color: #9ca3af; letter-spacing: .1em; text-transform: uppercase; width: 100%; margin-bottom: 2px; }
  .chat-context-pill { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 4px; font-size: 10px; color: #6b7280; padding: 2px 8px; font-family: 'Consolas', monospace; }

  /* REPORT STYLES */
  .report-section { margin-bottom: 16px; }
  .report-section-title { font-size: 9px; font-weight: 700; letter-spacing: .13em; text-transform: uppercase; color: #dc2626; margin-bottom: 7px; padding-bottom: 4px; border-bottom: 1px solid #fee2e2; }
  .report-section-title.blue { color: #2563eb; border-bottom-color: #bfdbfe; }
  .report-section-title.dark { color: #374151; border-bottom-color: #e5e7eb; }
  .status-banner { display: flex; align-items: center; gap: 10px; background: #fffbeb; border: 1px solid #fde68a; border-radius: 8px; padding: 10px 14px; margin-bottom: 14px; }
  .status-banner.blue { background: #eff6ff; border-color: #bfdbfe; }
  .status-pill { font-size: 11px; font-weight: 700; padding: 3px 10px; border-radius: 20px; white-space: nowrap; }
  .status-pill.yellow { background: #fef3c7; color: #b45309; }
  .status-pill.blue { background: #dbeafe; color: #1d4ed8; }
  .metric-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 14px; }
  .metric-card { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 10px 12px; text-align: center; }
  .metric-val { font-size: 22px; font-weight: 800; color: #111827; line-height: 1; }
  .metric-val.red { color: #dc2626; } .metric-val.green { color: #16a34a; } .metric-val.yellow { color: #d97706; } .metric-val.blue { color: #2563eb; }
  .metric-lbl { font-size: 10px; color: #6b7280; margin-top: 3px; line-height: 1.3; }
  .table-wrap { overflow-x: auto; }
  table { width: 100%; border-collapse: collapse; font-size: 11px; }
  thead th { background: #f9fafb; font-weight: 700; color: #374151; text-align: left; padding: 7px 10px; border-bottom: 2px solid #e5e7eb; font-size: 10px; text-transform: uppercase; letter-spacing: .06em; }
  tbody td { padding: 7px 10px; border-bottom: 1px solid #f3f4f6; color: #374151; vertical-align: top; }
  tbody tr:last-child td { border-bottom: none; }
  .sev-p0 { background: #fee2e2; color: #b91c1c; font-size: 10px; font-weight: 700; padding: 2px 6px; border-radius: 3px; }
  .sev-p1 { background: #fef3c7; color: #b45309; font-size: 10px; font-weight: 700; padding: 2px 6px; border-radius: 3px; }
  .badge-watch { background: #fef9c3; color: #713f12; font-size: 10px; padding: 2px 6px; border-radius: 3px; }
  .two-col { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
  .item-row { display: flex; align-items: flex-start; gap: 8px; margin-bottom: 7px; font-size: 12px; }
  .item-dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; margin-top: 5px; }
  .item-dot.red { background: #dc2626; } .item-dot.yellow { background: #d97706; } .item-dot.green { background: #16a34a; } .item-dot.blue { background: #2563eb; } .item-dot.gray { background: #9ca3af; }
  .item-text { color: #374151; line-height: 1.5; }
  .item-text strong { color: #111827; }
  .decision-card { background: #f9fafb; border: 1px solid #e5e7eb; border-left: 3px solid #dc2626; border-radius: 0 6px 6px 0; padding: 9px 12px; margin-bottom: 7px; }
  .decision-q { font-size: 12px; font-weight: 700; color: #111827; }
  .decision-meta { font-size: 11px; color: #6b7280; margin-top: 2px; }
  .sync-file-row { display: flex; align-items: center; justify-content: space-between; padding: 7px 10px; border-bottom: 1px solid #f3f4f6; font-size: 11px; }
  .sync-file-row:last-child { border-bottom: none; }
  .sync-filename { color: #374151; font-family: 'Consolas',monospace; font-size: 10px; }
  .sync-badge-new { background: #dcfce7; color: #15803d; font-size: 10px; font-weight: 700; padding: 1px 7px; border-radius: 3px; }
  .sync-badge-upd { background: #dbeafe; color: #1d4ed8; font-size: 10px; font-weight: 700; padding: 1px 7px; border-radius: 3px; }
  .sync-badge-stale { background: #fee2e2; color: #b91c1c; font-size: 10px; font-weight: 700; padding: 1px 7px; border-radius: 3px; }
  .health-stat-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 14px; }
  .source-note { font-size: 10px; color: #9ca3af; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 6px; padding: 7px 12px; margin-top: 14px; }
  .mcp-callout { background: #f0fdf4; border: 1px solid #86efac; border-radius: 8px; padding: 11px 14px; margin-bottom: 14px; }
  .mcp-callout-label { font-size: 10px; font-weight: 700; color: #059669; letter-spacing: .06em; text-transform: uppercase; margin-bottom: 3px; }
  .mcp-callout-text { font-size: 11px; color: #374151; line-height: 1.55; }
  .gh-callout { background: #f9fafb; border: 1px solid #d1d5db; border-radius: 8px; padding: 11px 14px; margin-bottom: 14px; }
  .gh-callout-label { font-size: 10px; font-weight: 700; color: #374151; letter-spacing: .06em; text-transform: uppercase; margin-bottom: 3px; }
  .gh-callout-text { font-size: 11px; color: #374151; line-height: 1.55; }
  .highlight-box { background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 12px 14px; margin-bottom: 10px; }
  .highlight-box-title { font-size: 11px; font-weight: 700; color: #111827; margin-bottom: 4px; }
  .highlight-box-desc { font-size: 11px; color: #6b7280; line-height: 1.5; }
</style>
</head>
<body>
<div class="slide">

  <!-- HEADER -->
  <div class="header">
    <div>
      <div class="title-vault">"The <span>Vault</span>"</div>
      <div class="title-sub">NPI Intelligence Platform &nbsp;¬∑&nbsp; W3 Hardware Wallet &nbsp;¬∑&nbsp; DVT March 2026</div>
    </div>
    <div class="badge">Block Hardware Engineering</div>
  </div>

  <!-- PLATFORM FLOW -->
  <div class="platform-section">
    <div class="section-label">Platform Architecture</div>
    <div class="flow">
      <div class="flow-node"><div class="flow-node-inner">
        <div class="logo-box"><svg viewBox="0 0 44 44" fill="none"><rect width="44" height="44" rx="9" fill="#f3f4f6"/><rect x="9" y="10" width="7" height="7" rx="1.5" fill="#9ca3af"/><rect x="19" y="11.5" width="16" height="3" rx="1.5" fill="#d1d5db"/><rect x="9" y="20" width="7" height="7" rx="1.5" fill="#9ca3af"/><rect x="19" y="21.5" width="16" height="3" rx="1.5" fill="#d1d5db"/><rect x="9" y="30" width="7" height="7" rx="1.5" fill="#9ca3af"/><rect x="19" y="31.5" width="16" height="3" rx="1.5" fill="#d1d5db"/></svg></div>
        <div class="flow-node-name">Program Data</div>
        <div class="flow-node-desc">Build reports, MILs, decisions, meeting notes, risks</div>
      </div></div>
      <div class="flow-arrow"><div class="arrow-line"></div><div class="arrow-label">sync</div></div>
      <div class="flow-node"><div class="flow-node-inner highlight">
        <div class="logo-box"><svg viewBox="0 0 512 512"><path d="M381.85 56.6c-13.09-8.73-31.28-6.38-42.09 2.91l-86.78 72.9-80.29-31.37c-14.26-5.57-30.45-.15-38.68 12.8L56.22 249.07c-8.23 12.95-6.45 29.96 4.28 41l118.7 122.06c5.87 6.03 13.89 9.53 22.3 9.53h.82c8.76-.24 17.02-4.31 22.7-11.15l111.96-136.27 72.77 13.85c15.33 2.92 30.38-5.94 35.2-20.77l47.21-143.8c4.83-14.71-1.13-30.89-14.33-38.97z" fill="#7C3AED"/><path d="M381.85 56.6c-13.09-8.73-31.28-6.38-42.09 2.91l-86.78 72.9 60.52 139.17 72.77 13.85c15.33 2.92 30.38-5.94 35.2-20.77l47.21-143.8c4.83-14.71-1.13-30.89-14.33-38.97-.5-.29-1-.57-1.5-.83z" fill="#6D28D9"/><path d="M253 132.41l-80.29-31.37c-14.26-5.57-30.45-.15-38.68 12.8L56.22 249.07c-8.23 12.95-6.45 29.96 4.28 41l118.7 122.06c5.87 6.03 13.89 9.53 22.3 9.53h.82c8.76-.24 17.02-4.31 22.7-11.15l111.96-136.27z" fill="#8B5CF6"/><ellipse cx="228" cy="291" rx="33" ry="49" transform="rotate(-30 228 291)" fill="#DDD6FE" opacity=".55"/></svg></div>
        <div class="flow-node-name">Obsidian Vault</div>
        <div class="flow-node-desc">Structured markdown, wiki-links, version-controlled knowledge graph</div>
      </div></div>
      <div class="flow-arrow"><div class="arrow-line"></div><div class="arrow-label">reads</div></div>
      <div class="flow-node"><div class="flow-node-inner highlight">
        <div class="logo-box"><svg viewBox="0 0 44 44" fill="none"><rect width="44" height="44" rx="9" fill="#fef2f2"/><path d="M27.6 11h-4.22l8.02 22h4.24L27.6 11zm-11.2 0L7.36 33h4.3l1.65-4.46h8.42L23.38 33h4.3L19.63 11h-3.23zm-.67 13.9 2.8-7.58 2.8 7.58h-5.6z" fill="#CC2B2B"/></svg></div>
        <div class="flow-node-name">Claude Code</div>
        <div class="flow-node-desc">Anthropic AI ‚Äî reads full vault, executes NPI commands, sources every output</div>
      </div></div>
      <div class="flow-arrow"><div class="arrow-line"></div><div class="arrow-label">produces</div></div>
      <div class="flow-node"><div class="flow-node-inner">
        <div class="logo-box"><svg viewBox="0 0 44 44" fill="none"><rect width="44" height="44" rx="9" fill="#f0fdf4"/><rect x="9" y="12" width="22" height="3.5" rx="1.75" fill="#16a34a" opacity=".5"/><rect x="9" y="19" width="22" height="3.5" rx="1.75" fill="#16a34a" opacity=".5"/><rect x="9" y="26" width="15" height="3.5" rx="1.75" fill="#16a34a" opacity=".5"/><circle cx="33" cy="32" r="7" fill="#16a34a"/><path d="M30 32l2.2 2.2 3.8-4" stroke="white" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg></div>
        <div class="flow-node-name">Executive Output</div>
        <div class="flow-node-desc">Sourced, accurate, ready to present ‚Äî no placeholders, no blank pages</div>
      </div></div>
    </div>
  </div>

  <!-- BOTTOM -->
  <div class="bottom">
    <!-- COL 1 -->
    <div class="col col-left">
      <div class="sub-label">Automated Commands ‚Äî click to preview</div>
      <div class="cmd-grid">
        <div class="cmd-card" onclick="openModal('readiness')"><div class="cmd-tag">/hub:readiness</div><div class="cmd-name">Build Readiness</div><div class="cmd-desc">GO/NO-GO with confidence rating (EVT‚ÜíDVT‚ÜíPVT)</div><div class="cmd-hint">‚Üó Preview</div></div>
        <div class="cmd-card" onclick="openModal('weekly')"><div class="cmd-tag">/hub:weekly-report</div><div class="cmd-name">Executive Report</div><div class="cmd-desc">12-section report, WoW deltas auto-calculated</div><div class="cmd-hint">‚Üó Preview</div></div>
        <div class="cmd-card" onclick="openModal('mil')"><div class="cmd-tag">/hub:master-mil</div><div class="cmd-name">Master MIL</div><div class="cmd-desc">Cross-build issue aggregation with lineage tracking</div><div class="cmd-hint">‚Üó Preview</div></div>
        <div class="cmd-card" onclick="openModal('compare')"><div class="cmd-tag">/hub:compare</div><div class="cmd-name">Build Comparator</div><div class="cmd-desc">NEW / RESOLVED / RECURRING classification</div><div class="cmd-hint">‚Üó Preview</div></div>
        <div class="cmd-card" onclick="openModal('briefing')"><div class="cmd-tag">/hub:briefing</div><div class="cmd-name">Weekly Briefing</div><div class="cmd-desc">Priorities, open loops, delegated items</div><div class="cmd-hint">‚Üó Preview</div></div>
        <div class="cmd-card" onclick="openModal('agenda')"><div class="cmd-tag">/hub:agenda</div><div class="cmd-name">Meeting Agenda</div><div class="cmd-desc">Pre-populated, risks by severity, zero manual prep</div><div class="cmd-hint">‚Üó Preview</div></div>
      </div>
    </div>

    <!-- COL 2 -->
    <div class="col col-mid">
      <div class="sub-label">Vault Health &amp; Knowledge ‚Äî click to preview</div>
      <div class="health-cards">
        <div class="health-card featured" onclick="openModal('sync')">
          <div class="health-card-top"><span class="health-cmd">/hub:sync</span><span class="mcp-badge">‚ö° Powered by MCP</span></div>
          <div class="health-name">Google Drive Sync</div>
          <div class="health-desc">Pulls latest program docs from Drive via MCP ‚Äî converts to tagged markdown with source links and backlinks.</div>
          <div class="health-hint">‚Üó Preview</div>
        </div>
        <div class="health-card featured" onclick="openModal('slack')">
          <div class="health-card-top"><span class="health-cmd">/hub:slack-roundup</span><span class="mcp-badge">‚ö° Glean MCP ¬∑ Alpha</span></div>
          <div class="health-name">Slack Roundup</div>
          <div class="health-desc">Daily digest of program Slack activity via Glean MCP ‚Äî surfaces decisions, blockers, and context across W3 channels.</div>
          <div class="health-hint">‚Üó Preview</div>
        </div>
        <div class="health-card" onclick="openModal('currency')">
          <div class="health-card-top"><span class="health-cmd">/hub:doc-currency</span></div>
          <div class="health-name">Documentation Currency Check</div>
          <div class="health-desc">Full vault health audit ‚Äî flags stale docs, missing bidirectional links, and broken backlink coverage.</div>
          <div class="health-hint">‚Üó Preview</div>
        </div>
        <div class="health-card github" onclick="openModal('github')">
          <div class="health-card-top"><span class="health-cmd">git</span><span class="gh-badge">‚éá Version Control</span></div>
          <div class="health-name">GitHub ‚Äî Org-Wide Scaling</div>
          <div class="health-desc">Vault lives in git ‚Äî full history, branching, and the path to sharing knowledge across every NPI program in the org.</div>
          <div class="health-hint">‚Üó Preview</div>
        </div>
      </div>
    </div>

    <!-- COL 3 -->
    <div class="col col-right">
      <div class="sub-label">Conversational Intelligence ‚Äî Five Core Skills</div>
      <div class="use-cases">
        <div class="use-card" onclick="openModal('skill_brief')"><div class="use-title">Brief Me</div><div class="use-desc">Before any meeting or decision ‚Äî prior decisions, open risks, build data, outstanding actions. A tight brief, not a search result.</div><div class="use-hint">‚Üó</div></div>
        <div class="use-card" onclick="openModal('skill_synthesize')"><div class="use-title">Synthesize What We Know</div><div class="use-desc">Pull everything across builds, doc types, and time into a coherent answer. EVT learnings surface in a DVT question.</div><div class="use-hint">‚Üó</div></div>
        <div class="use-card" onclick="openModal('skill_draft')"><div class="use-title">Draft It</div><div class="use-desc">Convert intent and vault context into polished, audience-calibrated output. Documents start from real program data.</div><div class="use-hint">‚Üó</div></div>
        <div class="use-card" onclick="openModal('skill_interpret')"><div class="use-title">Interpret New Information</div><div class="use-desc">Hand it a BRR deck or test report ‚Äî returns what's new, what conflicts with prior data, and what it means for the program.</div><div class="use-hint">‚Üó</div></div>
        <div class="use-card" onclick="openModal('skill_surface')"><div class="use-title">Surface What You're Not Seeing</div><div class="use-desc">Recurring issues carrying forward. Risks not updated in weeks. Patterns that only emerge across the full corpus.</div><div class="use-hint">‚Üó</div></div>
      </div>
    </div>
  </div>

  <!-- MODAL -->
  <div class="modal-overlay" id="modalOverlay" onclick="handleOverlayClick(event)">
    <div class="modal">
      <div class="modal-header">
        <div>
          <div class="modal-title-wrap"><span id="modalCmd"></span><span class="modal-title" id="modalTitle"></span></div>
          <div class="modal-meta" id="modalMeta"></div>
        </div>
        <button class="modal-close" onclick="closeModal()">‚úï</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>
</div>

<script>
const chatModal = (prompt, response, sources) => `
  <div class="chat-wrap">
    <div class="chat-row-user"><div class="chat-bubble-user">${prompt}</div></div>
    <div class="chat-row-ai"><div class="chat-bubble-ai">
      <span class="ai-label">The Vault</span>${response}
    </div></div>
    <div class="chat-context">
      <div class="chat-context-label">Vault sources</div>
      ${sources.map(s=>`<div class="chat-context-pill">${s}</div>`).join('')}
    </div>
  </div>`;

const reports = {

  readiness: {
    cmd:'/hub:readiness', cmdClass:'modal-cmd-red', title:'DVT Build Readiness Assessment',
    meta:'Generated Feb 22, 2026 ¬∑ W3 Hardware Wallet',
    html:`<div class="status-banner"><span class="status-pill yellow">üü° CONDITIONAL GO</span><span class="status-text"><strong>Confidence: 80%</strong> ‚Äî DVT start March 4, 2026. All 5 gate criteria met. BRR Feb 23 is final approval. Revised from 82% after 5/5 tumble failure on Corian housing.</span></div>
    <div class="metric-row">
      <div class="metric-card"><div class="metric-val green">98.45%</div><div class="metric-lbl">PDVT SMT Yield<br>(target ‚â•95%)</div></div>
      <div class="metric-card"><div class="metric-val green">90.93%</div><div class="metric-lbl">PDVT FATP Yield<br>(target ‚â•85%)</div></div>
      <div class="metric-card"><div class="metric-val green">100%</div><div class="metric-lbl">MIL Resolution<br>PDVT (11/11)</div></div>
      <div class="metric-card"><div class="metric-val red">5/5</div><div class="metric-lbl">Tumble FAIL<br>Corian chip-off</div></div>
    </div>
    <div class="report-section"><div class="report-section-title">Gate Criteria</div>
    <div class="table-wrap"><table><thead><tr><th>Criterion</th><th>Status</th><th>Confidence</th></tr></thead><tbody>
      <tr><td>Design Freeze</td><td>üü¢ COMPLETE ‚Äî MLB Ok2Fab 1/29, BOM 100% locked</td><td>95%</td></tr>
      <tr><td>Touch Validation</td><td>üü¢ COMPLETE ‚Äî 127 FATP units; alpha testing in progress</td><td>82%</td></tr>
      <tr><td>Battery Lifetime</td><td>üü¢ COMPLETE ‚Äî ~28 months shelf life with DVT fixes</td><td>90%</td></tr>
      <tr><td>Manufacturing Proven</td><td>üü¢ VALIDATED ‚Äî PDVT yields exceed all targets</td><td>95%</td></tr>
      <tr><td>BOM Lock 100%</td><td>üü¢ COMPLETE ‚Äî EE 106/106, ME 19/19</td><td>90%</td></tr>
    </tbody></table></div></div>
    <div class="report-section"><div class="report-section-title">BRR Conditions ‚Äî Required by Feb 23</div>
      <div class="item-row"><div class="item-dot green"></div><div class="item-text"><strong>ESD root cause CONFIRMED (2/19)</strong> ‚Äî Soldermask pullback + DNP U2. No PCB spin.</div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>NFC Performance Decision</strong> ‚Äî Ahmad results due 2/19. Recommended: GO with 2‚Äì3 variants.</div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>Touch UX Acceptability</strong> ‚Äî Alpha testing 2/17‚Äì2/23. ‚â•90% task completion required.</div></div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>Tumble FA (NEW 2/19)</strong> ‚Äî 5/5 Corian chip-off. DVT wall thinner. FA owner needed before BRR.</div></div>
    </div>
    <div class="source-note">üìÑ DVT-Readiness-Assessment-2026-02-17 ¬∑ PDVT-Build-Summary ¬∑ master-mil.csv ¬∑ RISK-010, RISK-013</div>`
  },

  weekly: {
    cmd:'/hub:weekly-report', cmdClass:'modal-cmd-red', title:'NPI Weekly Report ‚Äî W08 ¬∑ Feb 16‚Äì20, 2026',
    meta:'W3 Hardware Wallet ¬∑ Phase: Post-DMR2 / BRR Sprint / DVT Prep ¬∑ Generated 2026-02-20',
    html:`<div style="background:#f9fafb;border:1px solid #e5e7eb;border-radius:10px;padding:14px 16px;margin-bottom:14px;display:grid;grid-template-columns:1fr auto;gap:12px;align-items:start;">
      <div>
        <div style="font-size:10px;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:#9ca3af;margin-bottom:5px;">W3 Hardware Wallet ¬∑ W08 ¬∑ Post-DMR2 / BRR Sprint</div>
        <div style="font-size:13px;font-weight:700;color:#111827;margin-bottom:6px;">TLDR</div>
        <div style="font-size:12px;color:#374151;line-height:1.65;">BRR gate Monday Feb 23 is the final DVT approval. Two significant new data points this week: <strong>5/5 tumble failure on Corian housing</strong> (chip-off as early as cycle 20) and <strong>DVT dry run ATE slot-specific fixture failures</strong> that are unresolved. Both need clear ownership and resolution paths before Monday. Manufacturing foundation remains strong ‚Äî PDVT SMT 98.45%, FATP 90.93%, 100% MIL resolution.</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end;flex-shrink:0;">
        <div style="background:#fef3c7;color:#b45309;font-size:11px;font-weight:700;padding:4px 12px;border-radius:20px;white-space:nowrap;">üü° Overall: Yellow</div>
        <div style="font-size:10px;color:#9ca3af;text-align:right;">12 days to DVT FAI<br>66 days to Vegas</div>
      </div>
    </div>
    <div class="report-section"><div class="report-section-title">Hardware Program Highlights</div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>Corian Housing Tumble Failure: 5/5 Units Fail at 0.5m</strong> ‚Äî Phase 2 REL validation revealed 100% tumble failure rate with Corian chip-off as early as cycle 20. DVT heavy housing retains Corian with a <em>thinner</em> wall section, making this directly relevant. FA ownership needed before BRR Monday. <em>(Owner: Nick George / Israel ‚Äî FA ownership TBD)</em></div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>DVT Dry Run ATE Session Surfaces Issues</strong> ‚Äî Feb 19 session at Wistron Malaysia identified: uncalibrated resistance test limits (5/5 MLB failures), slot-specific fixture failures (J-Link Slot 1, USB CC2 Slot 2), multi-slot messagebox bug, FTN software gaps. <code>FLASH_MAIN_MCU_SWD</code> unresolved at session end. <em>(Owner: Zach Stanziano, Ryan Taylor)</em></div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>NFC Characterization Strategy Defined</strong> ‚Äî Megan completing W3 vs W1 volume comparison by Friday 2/21 for BRR directional data. W3 shows ~5% sensitivity decrease vs W1 ‚Äî may not be significant given W1's 15% field failure rate. <em>(Owner: Megan, Joe Laucks, Justin Heckman)</em></div></div>
      <div class="item-row"><div class="item-dot blue"></div><div class="item-text"><strong>DVT Build Allocation Finalized: 1,482 units / 7 configs</strong> ‚Äî FAI (20), Mini (30), mREL (36), M1-Debug (95), M2-Dev (228), M3-Prod (353), Vegas (720). Vegas config intentionally delayed until 700+ through FATP. <em>(Owner: Justin Heckman)</em></div></div>
    </div>
    <div class="report-section"><div class="report-section-title">Program Status ‚Äî Week-over-Week</div>
    <div class="table-wrap"><table><thead><tr><th>Workstream</th><th>Status</th><th>WoW</th><th>Notes</th></tr></thead><tbody>
      <tr><td>Hardware / Mechanical</td><td>üü° Yellow</td><td>‚Üì</td><td>5/5 tumble failure; drop/ball drop results pending</td></tr>
      <tr><td>Software / Firmware</td><td>üü° Yellow</td><td>‚Üí</td><td>Alpha FW due 2/18; alpha testing in progress; TTW regression ongoing</td></tr>
      <tr><td>Manufacturing / Ops</td><td>üü° Yellow</td><td>‚Üí</td><td>ATE dry run issues surfaced; CNY skeleton crew</td></tr>
      <tr><td>Quality / REL</td><td>üî¥ Red</td><td>‚Üì</td><td>5/5 tumble FAIL; RISK-010 may need re-scoring</td></tr>
      <tr><td>Regulatory / Cert</td><td>üü° Yellow</td><td>‚Üí</td><td>US/Vegas NOT blocked; EU delayed May‚ÄìJune</td></tr>
      <tr><td>Supply Chain</td><td>üü¢ Green</td><td>‚Üí</td><td>All components secured; CNC chassis 5,150 units ordered</td></tr>
    </tbody></table></div></div>
    <div class="report-section"><div class="report-section-title">Active Risks</div>
    <div class="table-wrap"><table><thead><tr><th>Risk</th><th>Score</th><th>WoW</th><th>Update</th></tr></thead><tbody>
      <tr><td>RISK-013 ESD GTM Staggered Launch</td><td>üî¥ 16</td><td>NEW</td><td>Root cause due 2/17; US/Vegas NOT blocked; EU May‚ÄìJune</td></tr>
      <tr><td>RISK-007 Zero-Iteration Hardware</td><td>üî¥ 15</td><td>‚Üí</td><td>Structural; PVT fast-follow 4/6 assumes no design changes</td></tr>
      <tr><td>RISK-008 Software Day-1 Vegas</td><td>üü† 12</td><td>‚Üí</td><td>Alpha FW 2/18; 3-week internal beta March</td></tr>
      <tr><td>RISK-010 Heavy Housing Drop</td><td>üü° 6*</td><td>‚Üë</td><td>*Score likely needs upward revision after 5/5 tumble fail</td></tr>
    </tbody></table></div></div>
    <div class="report-section"><div class="report-section-title">Blockers Requiring Escalation</div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>Tumble FA Ownership (URGENT ‚Äî before BRR Monday)</strong> ‚Äî Escalate to Nick George, Israel, Miguel Harry. Deadline: before BRR 2/23.</div></div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>ATE Dry Run FLASH_MAIN_MCU_SWD</strong> ‚Äî Slot 1 J-Link unresolved. Escalate to Zach Stanziano / SEE team. Deadline: before DVT FAI 3/4.</div></div>
    </div>
    <div class="source-note">üìÑ 2026-02-20-W3-NPI-Weekly ¬∑ DVT-Readiness-Assessment-2026-02-17 ¬∑ 2026-02-19-W3-DVT-Dry-Run-ATE-Debug ¬∑ RISK-010 ¬∑ RISK-013</div>`
  },

  mil: {
    cmd:'/hub:master-mil', cmdClass:'modal-cmd-red', title:'Master Manufacturing Issue Log ‚Äî All Builds',
    meta:'Generated Feb 4, 2026 ¬∑ Builds: EVT + PDVT ¬∑ Sources: master-mil.csv',
    html:`<div class="metric-row">
      <div class="metric-card"><div class="metric-val">77</div><div class="metric-lbl">Total Issues</div></div>
      <div class="metric-card"><div class="metric-val red">12</div><div class="metric-lbl">Active (Watching)</div></div>
      <div class="metric-card"><div class="metric-val green">65</div><div class="metric-lbl">Resolved</div></div>
      <div class="metric-card"><div class="metric-val green">0</div><div class="metric-lbl">Cross-Build Recurring</div></div>
    </div>
    <div class="report-section"><div class="report-section-title">Active Issues ‚Äî DVT Mitigations Required</div>
    <div class="table-wrap"><table><thead><tr><th>ID</th><th>Sev</th><th>Title</th><th>Build</th></tr></thead><tbody>
      <tr><td>MIL-044</td><td><span class="sev-p0">P0</span></td><td>NFC High FATP Test Station Retest Rates</td><td>EVT</td></tr>
      <tr><td>MIL-041</td><td><span class="sev-p0">P0</span></td><td>NFC Flex Pinch</td><td>EVT</td></tr>
      <tr><td>MIL-030</td><td><span class="sev-p0">P0</span></td><td>System Weight Too Low (20g deficit)</td><td>EVT</td></tr>
      <tr><td>MIL-032</td><td><span class="sev-p1">P1</span></td><td>Run-In Instability</td><td>EVT</td></tr>
      <tr><td>MIL-P012</td><td><span class="sev-p1">P1</span></td><td>C57 Interference with Display Flex Stiffener</td><td>PDVT</td></tr>
      <tr><td>MIL-067</td><td><span class="sev-p1">P1</span></td><td>USB-C Gasket Detaching During Assembly</td><td>EVT</td></tr>
    </tbody></table></div></div>
    <div class="report-section"><div class="report-section-title">Resolution by Build</div>
    <div class="table-wrap"><table><thead><tr><th>Build</th><th>Total</th><th>Resolved</th><th>Rate</th></tr></thead><tbody>
      <tr><td>EVT</td><td>65</td><td>54</td><td>üü° 83%</td></tr>
      <tr><td>PDVT</td><td>12</td><td>11</td><td>üü¢ 100% at exit</td></tr>
    </tbody></table></div></div>
    <div class="source-note">üìÑ master-mil.csv ¬∑ EVT-Manufacturing-Issue-Log ¬∑ PDVT-Manufacturing-Issue-Log</div>`
  },

  compare: {
    cmd:'/hub:compare', cmdClass:'modal-cmd-red', title:'Build-over-Build Quality Analysis ‚Äî EVT ‚Üí PDVT',
    meta:'Generated Feb 20, 2026 ¬∑ W3 Hardware Wallet',
    html:`<div class="metric-row">
      <div class="metric-card"><div class="metric-val red">-0.81pp</div><div class="metric-lbl">SMT Yield<br>99.26% ‚Üí 98.45%</div></div>
      <div class="metric-card"><div class="metric-val green">+14.8pp</div><div class="metric-lbl">FATP Yield<br>76.13% ‚Üí 90.93%</div></div>
      <div class="metric-card"><div class="metric-val green">+40pp</div><div class="metric-lbl">MIL Resolution<br>60% ‚Üí 100%</div></div>
      <div class="metric-card"><div class="metric-val green">0</div><div class="metric-lbl">Critical Issues<br>at PDVT Exit</div></div>
    </div>
    <div class="report-section"><div class="report-section-title">Issue Classification</div>
    <div class="table-wrap"><table><thead><tr><th>Classification</th><th>Count</th><th>Notes</th></tr></thead><tbody>
      <tr><td>üî¥ NEW (PDVT-only)</td><td>12</td><td>11/12 resolved at exit</td></tr>
      <tr><td>‚úÖ RESOLVED (EVT‚ÜíPDVT)</td><td>54</td><td>Confirmed closed; not carried forward</td></tr>
      <tr><td>üü° CARRIED FORWARD</td><td>12</td><td>DVT mitigations planned for all</td></tr>
      <tr><td>üîÅ RECURRING</td><td>0</td><td>No issues reappeared across builds</td></tr>
    </tbody></table></div></div>
    <div class="source-note">üìÑ EVT-Build-Summary ¬∑ PDVT-Build-Summary ¬∑ master-mil.csv</div>`
  },

  briefing: {
    cmd:'/hub:briefing', cmdClass:'modal-cmd-red', title:'Weekly Prep Briefing ‚Äî Week of Feb 23, 2026',
    meta:'Prepared for Justin Heckman ¬∑ Feb 22, 2026',
    html:`<div class="report-section"><div class="report-section-title">Top Priorities</div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>BRR ‚Äî Lock Final DVT GO (Mon 2/23)</strong> ‚Äî Three binding decisions today. Key ambiguity: does tumble FA have a named owner before the meeting?</div></div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>Tumble FA ‚Äî Establish Ownership (Mon‚ÄìWed)</strong> ‚Äî 5/5 Corian chip-off, earliest cycle 20. DVT wall thinner. Escalate to Nick George and Israel today.</div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>DVT Dry Run Close-Out (Mon‚ÄìFri)</strong> ‚Äî FLASH_MAIN_MCU_SWD and USB CC2 unresolved. Must land before DVT Day 1.</div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>ESD Multi-Unit Validation ‚Äî Set Up for 2/28</strong> ‚Äî Single unit clean. Scale to 3‚Äì5 units this week.</div></div>
    </div>
    <div class="report-section"><div class="report-section-title">Delegated Items</div>
    <div class="table-wrap"><table><thead><tr><th>Owner</th><th>Item</th><th>Check When</th></tr></thead><tbody>
      <tr><td>Nick George / Israel</td><td>Tumble FA ownership + chip-off locations</td><td>Monday BRR, then daily</td></tr>
      <tr><td>Max Guise / Ben McGee</td><td>Alpha testing results ‚Äî task completion %</td><td>Monday BRR</td></tr>
      <tr><td>Joe Laucks / Yuchan</td><td>ESD multi-unit (3‚Äì5 units) on track for 2/28</td><td>Wednesday, 2/28 close</td></tr>
      <tr><td>Zach Stanziano / Ryan Taylor</td><td>ATE dry run slot issues resolved</td><td>Daily through 3/4</td></tr>
    </tbody></table></div></div>
    <div class="source-note">üìÑ 2026-02-23-Weekly-Prep-Briefing ¬∑ DVT-Readiness-Assessment-2026-02-17</div>`
  },

  agenda: {
    cmd:'/hub:agenda', cmdClass:'modal-cmd-red', title:'W3 Core Team Agenda ‚Äî Feb 17, 2026',
    meta:'Auto-generated from vault ¬∑ BRR sprint ¬∑ 15 days to DVT FAI',
    html:`<div class="status-banner"><span class="status-pill yellow">üü° BRR SPRINT</span><span class="status-text"><strong>Final sprint to BRR Gate (Feb 23).</strong> Three critical decisions converging: NFC optimization (results 2/19), Touch UX (alpha starts today), ESD mitigation (root cause due today).</span></div>
    <div class="report-section"><div class="report-section-title">Decisions Required at BRR</div>
      <div class="decision-card"><div class="decision-q">1. NFC Performance Optimization Path</div><div class="decision-meta">Current NFC + fast-follow ¬∑ 2‚Äì3 DVT variants ¬∑ DVT delay ¬∑ Owner: Michael Lamfalusi, Joe Laucks, Justin Heckman</div></div>
      <div class="decision-card"><div class="decision-q">2. Touch UX Acceptability for Vegas Launch</div><div class="decision-meta">Alpha testing today‚ÄìFeb 23 ¬∑ GO / Marginal / Delay ¬∑ Owner: Max Guise, Ben McGee, Chase Cooper</div></div>
      <div class="decision-card"><div class="decision-q">3. ESD Mitigation Plan ‚Äî DVT GO for US/Canada</div><div class="decision-meta">Root cause due today ¬∑ BOM vs PCB changes ¬∑ EU May‚ÄìJune post-fix + 6-week re-cert</div></div>
    </div>
    <div class="report-section"><div class="report-section-title">Open Action Items</div>
    <div class="table-wrap"><table><thead><tr><th>Action</th><th>Owner</th><th>Due</th></tr></thead><tbody>
      <tr><td>Ahmad NFC optimization results</td><td>Emad Bidari, Joe Laucks</td><td>Feb 19</td></tr>
      <tr><td>Alpha software release</td><td>Chris Rieger, Ben McGee</td><td>Feb 18</td></tr>
      <tr><td>ESD root cause investigation</td><td>Joe Laucks, Israel</td><td>Feb 17 (today)</td></tr>
      <tr><td>Pre-BRR status sync</td><td>Justin Heckman (EPM)</td><td>Feb 21</td></tr>
    </tbody></table></div></div>
    <div class="source-note">üìÑ 2026-02-17-W3-Core-Team-Agenda ¬∑ RISK-013 ¬∑ RISK-003</div>`
  },

  sync: {
    cmd:'/hub:sync', cmdClass:'modal-cmd-blue', title:'Google Drive Sync ‚Äî Net New Knowledge',
    meta:'Executed Feb 22, 2026 ¬∑ Via MCP Google Drive connector',
    html:`<div class="mcp-callout"><div class="mcp-callout-label">‚ö° MCP ‚Äî Model Context Protocol</div><div class="mcp-callout-text">Claude Code connects directly to Google Drive via MCP ‚Äî no manual export. Documents are pulled live, converted to structured markdown, and linked back into the vault knowledge graph. A <strong>Net New Knowledge summary</strong> captures what changed since the last run.</div></div>
    <div class="report-section"><div class="report-section-title blue">Sync Summary ‚Äî Feb 22, 2026</div>
    <div class="health-stat-row">
      <div class="metric-card"><div class="metric-val blue">6</div><div class="metric-lbl">Documents Pulled</div></div>
      <div class="metric-card"><div class="metric-val green">4</div><div class="metric-lbl">New to Vault</div></div>
      <div class="metric-card"><div class="metric-val yellow">2</div><div class="metric-lbl">Updated Since Last Sync</div></div>
    </div></div>
    <div class="report-section"><div class="report-section-title blue">Files Synced</div>
    <div style="background:#f9fafb;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden;">
      <div class="sync-file-row"><span class="sync-filename">2026-02-20-W3-ESD-Mitigation-Sync.md</span><span class="sync-badge-new">NEW</span></div>
      <div class="sync-file-row"><span class="sync-filename">DVT-BRR-Build-Readiness-Risk-Table.md</span><span class="sync-badge-new">NEW</span></div>
      <div class="sync-file-row"><span class="sync-filename">2026-02-19-W3-PDVT-REL-Tumble-Failure-Analysis.md</span><span class="sync-badge-new">NEW</span></div>
      <div class="sync-file-row"><span class="sync-filename">2026-02-19-W3-NFC-Volume-Characterization-1-Pager.md</span><span class="sync-badge-new">NEW</span></div>
      <div class="sync-file-row"><span class="sync-filename">DVT-Readiness-Assessment-2026-02-17.md</span><span class="sync-badge-upd">UPDATED</span></div>
      <div class="sync-file-row"><span class="sync-filename">RISK-013-W3-ESD-GTM-Launch-Impact.md</span><span class="sync-badge-upd">UPDATED</span></div>
    </div></div>
    <div class="source-note">üìÑ Synced from W3 Program Shared Drive ¬∑ Via MCP Google Drive connector ¬∑ Auto-tagged and cross-linked on import</div>`
  },

  slack: {
    cmd:'/hub:slack-roundup', cmdClass:'modal-cmd-blue', title:'Slack Roundup ‚Äî Feb 24, 2026',
    meta:'Alpha ¬∑ Via Glean MCP ¬∑ Coverage: #-w3-alpha-support + 24 W3 channels',
    html:`<div class="mcp-callout"><div class="mcp-callout-label">‚ö° Glean MCP ‚Äî Alpha Testing</div><div class="mcp-callout-text">Daily digest of W3 Slack activity pulled via Glean MCP. Surfaces decisions, blockers, and UX signals that never make it into formal documents. <strong>Captures the informal record formal docs miss.</strong></div></div>
    <div class="report-section"><div class="report-section-title blue">TLDR ‚Äî Feb 24, 2026</div>
    <div class="status-banner blue"><span class="status-pill blue">Alpha Active</span><span class="status-text">SW team paused FW 1.1.3 rollout after discovering a critical bug ‚Äî firmware updates can erase fingerprint data and brick devices. Alpha testers onboarding in parallel; several got through with workarounds. Two UX gaps surfaced from real-time tester feedback.</span></div></div>
    <div class="report-section"><div class="report-section-title blue">Key Issues Surfaced</div>
      <div class="item-row"><div class="item-dot red"></div><div class="item-text"><strong>FW 1.1.3 rollout paused</strong> ‚Äî Bug causes fingerprint data loss on update, potentially bricking device. Gregory Price announcement at 20:44 PT. No resolution timeline yet.</div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>No fingerprint miss feedback on device</strong> ‚Äî No visual or haptic feedback for partial touches or wrong-finger attempts. Ford confirmed absent. Channing Ritter and Kenny Lopez cc'd; messaging scope TBD.</div></div>
      <div class="item-row"><div class="item-dot yellow"></div><div class="item-text"><strong>FW update animation obscured by thumb</strong> ‚Äî Animation at bottom of screen hidden during checkmark press. Max flagged with design principle. No owner assigned.</div></div>
    </div>
    <div class="report-section"><div class="report-section-title blue">Action Items</div>
    <div class="table-wrap"><table><thead><tr><th>Item</th><th>Owner</th><th>Status</th></tr></thead><tbody>
      <tr><td>Resolve FW 1.1.3 fingerprint loss bug</td><td>Gregory Price / SW Team</td><td><span class="sync-badge-stale">BLOCKED</span></td></tr>
      <tr><td>Tonight's app release ‚Äî Cam's action proof</td><td>Cam (SW)</td><td><span class="sync-badge-upd">IN PROGRESS</span></td></tr>
      <tr><td>Scope on-device fingerprint miss feedback</td><td>Channing Ritter, Kenny Lopez</td><td><span class="sync-badge-upd">DESIGN TBD</span></td></tr>
      <tr><td>FW update animation visibility</td><td>UX / FW ‚Äî unassigned</td><td><span class="sync-badge-upd">RAISED</span></td></tr>
    </tbody></table></div></div>
    <div class="source-note">üìÑ #-w3-alpha-support ¬∑ 24 other W3 channels (no indexed results ‚Äî after-hours + Glean indexing lag) ¬∑ Via Glean MCP ¬∑ Alpha</div>`
  },

  currency: {
    cmd:'/hub:doc-currency', cmdClass:'modal-cmd-blue', title:'Documentation Currency Check',
    meta:'Run Feb 22, 2026 ¬∑ Full vault audit ¬∑ 47 documents',
    html:`<div class="health-stat-row">
      <div class="metric-card"><div class="metric-val blue">47</div><div class="metric-lbl">Docs Audited</div></div>
      <div class="metric-card"><div class="metric-val green">38</div><div class="metric-lbl">Current</div></div>
      <div class="metric-card"><div class="metric-val red">9</div><div class="metric-lbl">Flagged</div></div>
    </div>
    <div class="report-section"><div class="report-section-title blue">Stale Documents</div>
    <div class="table-wrap"><table><thead><tr><th>Document</th><th>Last Updated</th><th>Issue</th></tr></thead><tbody>
      <tr><td>DVT-Readiness-Dashboard</td><td>Jan 29</td><td><span class="sync-badge-stale">STALE</span> ‚Äî Readiness assessment updated 3x since; not reconciled</td></tr>
      <tr><td>RISK-010-W3-System-Weight-Drop-Performance</td><td>Feb 12</td><td><span class="sync-badge-stale">STALE</span> ‚Äî Score re-escalated 2/19; risk doc not updated</td></tr>
      <tr><td>W3-Hardware-Wallet (hub)</td><td>Feb 9</td><td><span class="sync-badge-stale">STALE</span> ‚Äî 8 linked docs updated since; hub 13 days behind</td></tr>
    </tbody></table></div></div>
    <div class="source-note">üìÑ Full vault audit ¬∑ 47 documents ¬∑ Stale threshold: 30 days with linked-doc changes</div>`
  },

  github: {
    cmd:'git', cmdClass:'modal-cmd-dark', title:'GitHub ‚Äî Version Control & Org-Wide Scaling',
    meta:'W3 Hardware Wallet vault ¬∑ Block Hardware Engineering',
    html:`<div class="gh-callout"><div class="gh-callout-label">‚éá Why GitHub Is the Path to Scale</div><div class="gh-callout-text">The vault lives in a git repository. Every document, every command, every change is versioned and traceable. That's not just good hygiene ‚Äî it's the infrastructure that lets this platform expand from one program to every NPI program in the organization, with shared knowledge and no duplication.</div></div>
    <div class="report-section"><div class="report-section-title dark">How It Works Today ‚Äî W3</div>
      <div class="item-row"><div class="item-dot gray"></div><div class="item-text"><strong>Full revision history</strong> ‚Äî Every document change is committed with a timestamp and message. You can diff any document across time, see exactly when a risk score changed, or trace when a decision was first documented.</div></div>
      <div class="item-row"><div class="item-dot gray"></div><div class="item-text"><strong>Branching for build phases</strong> ‚Äî DVT, PVT, and production knowledge can branch and merge cleanly. No more "final_v3_REAL.docx" ‚Äî the repo is the single source of truth.</div></div>
      <div class="item-row"><div class="item-dot gray"></div><div class="item-text"><strong>Rollback and audit trail</strong> ‚Äî If a decision document is overwritten or a risk is incorrectly closed, the full history is recoverable. Every change is attributed to a person and a time.</div></div>
    </div>
    <div class="report-section"><div class="report-section-title dark">The Org-Wide Scaling Vision</div>
      <div class="highlight-box"><div class="highlight-box-title">Shared Program Repos</div><div class="highlight-box-desc">Each NPI program (W3, R2, next platform) gets its own vault repo. Common structures ‚Äî risk frameworks, MIL schemas, gate criteria templates ‚Äî live in a shared library repo that all programs inherit from. One update to the template propagates everywhere.</div></div>
      <div class="highlight-box"><div class="highlight-box-title">Cross-Program Knowledge</div><div class="highlight-box-desc">When W3 DVT surfaces a Corian tumble failure, that finding can be formally referenced by the next program. Git submodules or cross-repo links mean institutional knowledge doesn't stay trapped in one program's vault ‚Äî it becomes org infrastructure.</div></div>
      <div class="highlight-box"><div class="highlight-box-title">CI/CD for Program Documentation</div><div class="highlight-box-desc">Pull requests for major decisions. Automated checks that flag stale risk registers or missing BRR criteria before gate reviews. The same engineering rigor applied to hardware ‚Äî applied to the knowledge that drives hardware decisions.</div></div>
    </div>
    <div class="source-note">üìÑ W3 vault repo ¬∑ Block Hardware Engineering ¬∑ NPI Intelligence Platform</div>`
  },

  skill_brief: {
    cmd:'Brief Me', cmdClass:'modal-cmd-red', title:'Conversational Skill ‚Äî Pre-Meeting Brief',
    meta:'Example prompt ¬∑ Claude Code ¬∑ W3 Hardware Wallet vault',
    html: chatModal(
      `Brief me on the BRR. I'm walking in in 20 minutes ‚Äî where do the three decisions stand, what's most likely to blow up, and anything that surfaced in the last 48 hours I might not have seen.`,
      `<strong>BRR Pre-Brief ‚Äî Feb 23, 2026</strong><br><br>
      <strong>NFC</strong> ‚Äî Ahmad's results are in. W3 is +30% stronger than W1, ISO 14443 compliant. Recommended path is DVT GO with 2‚Äì3 variants. Should be a clean decision.<br><br>
      <strong>Touch UX</strong> ‚Äî Alpha ran 2/17‚Äì2/23. Threshold is ‚â•90% task completion. Tap accuracy is marginal (1.75mm vs 1.5mm target) ‚Äî expect it to come up. TTW regression does NOT block DVT.<br><br>
      <strong>ESD</strong> ‚Äî Root cause confirmed 2/19: soldermask pullback + DNP U2, no PCB spin. Expected GO with multi-unit validation (2/28).<br><br>
      <strong>Most likely to blow up:</strong> Tumble FA. 5/5 Corian chip-off at 0.5m, FA ownership unassigned as of yesterday. DVT wall is thinner than the failing units. If Nick and Israel don't have a clear severity story, this will dominate the room‚Ä¶`,
      ['DVT-Readiness-Assessment-2026-02-17','2026-02-23-Weekly-Prep-Briefing','RISK-013','RISK-010','2026-02-19-W3-PDVT-REL-Tumble-Failure-Analysis']
    )
  },
  skill_synthesize: {
    cmd:'Synthesize What We Know', cmdClass:'modal-cmd-red', title:'Conversational Skill ‚Äî Cross-Build Synthesis',
    meta:'Example prompt ¬∑ Claude Code ¬∑ W3 Hardware Wallet vault',
    html: chatModal(
      `What did EVT teach us about NFC that's relevant to the flex design change we're making for DVT? Pull everything ‚Äî issues, decisions, test results, meeting notes.`,
      `<strong>NFC ‚Äî EVT Learnings Relevant to DVT Flex Design</strong><br><br>
      <strong>The core EVT problem:</strong> NFC flex pinch (MIL-041, P0) was the critical failure ‚Äî flex routing caused mechanical interference under assembly load, driving intermittent comms failures at FATP. This drove a shorter flex and dedicated fixture for DVT (EE-7164, HW-009).<br><br>
      <strong>What antenna tuning locked in:</strong> BOM locked 1/17 with 3 capacitor values. Addressed MIL-044 (high retest rates) and MIL-035 (comms failures at MLB test) ‚Äî resolved by antenna change, not the flex.<br><br>
      <strong>The flex-specific DVT risk:</strong> EVT data shows failure was position-sensitive. Units 21 and 24 in PDVT showed earliest NFC failures correlated with flex shift at the FPS station (MIL-042). DVT assumes shorter flex eliminates pinch risk ‚Äî but not yet validated on DVT geometry‚Ä¶`,
      ['Master-MIL (MIL-041, MIL-044, MIL-042)','EVT-Build-Summary','PDVT-Build-Summary','DVT-Readiness-Assessment-2026-02-17']
    )
  },
  skill_draft: {
    cmd:'Draft It', cmdClass:'modal-cmd-red', title:'Conversational Skill ‚Äî Document Drafting',
    meta:'Example prompt ¬∑ Claude Code ¬∑ W3 Hardware Wallet vault',
    html: chatModal(
      `Draft the Ok2Vegas criteria one-pager. Leadership needs it by tomorrow morning. What has to be true by April 20 to ship 600 units, and what's the current status of each.`,
      `<strong>W3 Ok2Vegas Criteria ‚Äî April 27 Bitcoin Vegas Event</strong><br>
      <em>Draft ¬∑ Feb 22, 2026 ¬∑ For leadership review</em><br><br>
      <strong>1. DVT Complete ‚Äî 700+ units through FATP</strong> üü¢ On track. Build window Mar 4‚Äì28. Vegas config delayed until 700+ through FATP. Drop dead: Apr 20.<br><br>
      <strong>2. US/Canada Regulatory Cert</strong> üü° In progress. FCC/IC target Apr 20. ESD failure does NOT impact US cert. 7-day buffer to event.<br><br>
      <strong>3. Software Day-1 Readiness</strong> üü° Tracking. 3-week internal beta in March. TTW regression must resolve before Apr 27. (RISK-008, score 12)<br><br>
      <strong>4. Heavy Housing GO ‚Äî Vegas BOM Lock</strong> üî¥ Open. March 14 BOM lock depends on MINI RHEL results (Mar 7) and tumble FA. Contingencies dual-driven‚Ä¶`,
      ['DVT-Readiness-Assessment-2026-02-17','RISK-008','RISK-009','RISK-010','2026-02-17-W3-Core-Team-Agenda']
    )
  },
  skill_interpret: {
    cmd:'Interpret New Information', cmdClass:'modal-cmd-red', title:'Conversational Skill ‚Äî External Document Analysis',
    meta:'Example prompt ¬∑ Claude Code ¬∑ W3 Hardware Wallet vault',
    html: chatModal(
      `Here's the Phase 2 REL tumble test report [attached]. Tell me what's new, what conflicts with what we expected, and what it means for DVT.`,
      `<strong>Phase 2 Tumble ‚Äî What's New, What Conflicts, What It Means</strong><br><br>
      <strong>What's new:</strong> 5/5 units failed 0.5m tumble via Corian chip-off. Earliest at cycle 20. Heavy set down and random vibe clean. Failure is specific to sustained multi-directional tumble loading on a brittle material.<br><br>
      <strong>What conflicts:</strong> Feb 7 readiness assessment scored RISK-010 at Medium/6 with drop parity confirmed. The vault's prior assumption was Phase 2 would validate heavy housing. These results directly contradict that. Critically ‚Äî DVT retains Corian with a <em>thinner wall</em> than the failing units. That geometry wasn't flagged as a risk in any prior document.<br><br>
      <strong>What it means:</strong> RISK-010 needs re-scoring immediately ‚Äî Medium/6 is no longer defensible. March 14 heavy housing GO/NO-GO is now a real gate, not a formality‚Ä¶`,
      ['DVT-Readiness-Assessment-2026-02-07','DVT-Readiness-Assessment-2026-02-17','RISK-010','2025-12-16-W3-System-Weight-Strategy']
    )
  },
  skill_surface: {
    cmd:"Surface What You're Not Seeing", cmdClass:'modal-cmd-red', title:"Conversational Skill ‚Äî Proactive Pattern Detection",
    meta:'Example prompt ¬∑ Claude Code ¬∑ W3 Hardware Wallet vault',
    html: chatModal(
      `Do a full sweep and tell me what I should be worried about that hasn't been escalated yet ‚Äî things slipping, patterns across builds, risks that haven't been updated.`,
      `<strong>Vault Sweep ‚Äî Unescalated Concerns</strong><br><br>
      <strong>1. RISK-010 score is stale.</strong> Register still shows Medium/6. Tumble failure re-escalated it to High/12 in the readiness assessment ‚Äî the RISK-010 doc hasn't been updated. Anyone reading the register today sees a score 6 points too low.<br><br>
      <strong>2. EU cert restart trigger is undocumented.</strong> Staggered launch strategy appears in 4 documents. None define the specific trigger for restarting EU cert. Simon Ma is listed as owner ‚Äî no decision doc, no date, no criteria.<br><br>
      <strong>3. MIL-030 still shows as Watching.</strong> System weight strategy was decided at DMR1. MIL-030 hasn't been formally closed ‚Äî noise in the active issue count.<br><br>
      <strong>4. Feb 13 DVT quantity update is overdue.</strong> Revised quantities for US SKU front-loading (Jamille, Brett) due Feb 13. Listed as overdue in Feb 17 agenda, no resolution in any subsequent document‚Ä¶`,
      ['Master-MIL','RISK-010','2026-02-23-Weekly-Prep-Briefing','2026-02-17-W3-Core-Team-Agenda','RISK-013']
    )
  }
};

function openModal(key) {
  const r = reports[key];
  const cmdEl = document.getElementById('modalCmd');
  cmdEl.textContent = r.cmd; cmdEl.className = r.cmdClass;
  document.getElementById('modalTitle').textContent = r.title;
  document.getElementById('modalMeta').textContent = r.meta;
  document.getElementById('modalBody').innerHTML = r.html;
  document.getElementById('modalOverlay').classList.add('active');
}
function closeModal() { document.getElementById('modalOverlay').classList.remove('active'); }
function handleOverlayClick(e) { if (e.target === document.getElementById('modalOverlay')) closeModal(); }
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });
</script>
</body>
</html>
